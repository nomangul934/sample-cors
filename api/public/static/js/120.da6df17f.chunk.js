(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[120],{1436:function(e,a,t){"use strict";var n=t(67),c=t(68),r=t(113),l=t(112),o=t(270),i=t(0),s=t.n(i);a.a=function(e,a){return function(t){return function(i){Object(r.a)(u,i);var m=Object(l.a)(u);function u(t){var c;return Object(n.a)(this,u),c=m.call(this,t),Object(o.b)(e,a),c}return Object(c.a)(u,[{key:"render",value:function(){return s.a.createElement(t,this.props)}}]),u}(s.a.PureComponent)}}},1570:function(e,a,t){"use strict";var n=t(1),c=t(5),r=t(0),l=t.n(r),o=(t(2),t(3)),i=t(11),s=l.a.forwardRef((function(e,a){var t=e.classes,r=e.className,i=e.dividers,s=void 0!==i&&i,m=Object(c.a)(e,["classes","className","dividers"]);return l.a.createElement("div",Object(n.a)({className:Object(o.default)(t.root,r,s&&t.dividers),ref:a},m))}));a.a=Object(i.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(s)},1588:function(e,a,t){"use strict";var n=t(1),c=t(5),r=t(0),l=t.n(r),o=(t(2),t(3)),i=t(11),s=l.a.forwardRef((function(e,a){var t=e.disableSpacing,r=void 0!==t&&t,i=e.classes,s=e.className,m=Object(c.a)(e,["disableSpacing","classes","className"]);return l.a.createElement("div",Object(n.a)({className:Object(o.default)(i.root,s,!r&&i.spacing),ref:a},m))}));a.a=Object(i.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(s)},2917:function(e,a,t){"use strict";t.r(a);var n=t(133),c=t(193),r=t(1398),l=t(1377),o=t(1368),i=t(1436),s=t(0),m=t.n(s),u=t(8),d=t(7),p=t(195),f=t(275),E=t(1403),b=t(1411),C=t(1382),N=t(1396),h=t(1588),v=t(1570),O=t(716),T=t(1386),A=t(1385),y=t(208),g=t(73),j=t.n(g),P="[CONTACTS APP] GET USER DATA";function x(){var e=j.a.get("/api/contacts-app/user");return function(a){return e.then((function(e){return a({type:P,payload:e.data})}))}}var S="[CONTACTS APP] GET CONTACTS",w="[CONTACTS APP] SET SEARCH TEXT",I="[CONTACTS APP] DESELECT ALL CONTACTS";function k(e){var a=j.a.get("/api/contacts-app/contacts",{params:e});return function(t){return a.then((function(a){return t({type:S,payload:a.data,routeParams:e})}))}}function L(e){return function(a,t){var n=t().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/remove-contact",{contactId:e}).then((function(e){return Promise.all([a({type:"[CONTACTS APP] REMOVE CONTACT"})]).then((function(){return a(k(n))}))}))}}var D={id:"",name:"",lastName:"",avatar:"assets/images/avatars/profile.jpg",nickname:"",company:"",jobTitle:"",email:"",phone:"",address:"",birthday:"",notes:""};var W=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.contactsApp.contacts.contactDialog})),n=Object(p.b)(D),c=n.form,r=n.handleChange,o=n.setForm,i=Object(s.useCallback)((function(){"edit"===t.type&&t.data&&o(Object(d.a)({},t.data)),"new"===t.type&&o(Object(d.a)(Object(d.a)(Object(d.a)({},D),t.data),{},{id:f.a.generateGUID()}))}),[t.data,t.type,o]);function g(){return"edit"===t.type?a({type:"[CONTACTS APP] CLOSE EDIT CONTACT DIALOG"}):a({type:"[CONTACTS APP] CLOSE NEW CONTACT DIALOG"})}function P(){return c.name.length>0}function x(e){var n,r;e.preventDefault(),"new"===t.type?a((r=c,function(e,a){var t=a().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/add-contact",{newContact:r}).then((function(a){return Promise.all([e({type:"[CONTACTS APP] ADD CONTACT"})]).then((function(){return e(k(t))}))}))})):a((n=c,function(e,a){var t=a().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/update-contact",{contact:n}).then((function(a){return Promise.all([e({type:"[CONTACTS APP] UPDATE CONTACT"})]).then((function(){return e(k(t))}))}))})),g()}return Object(s.useEffect)((function(){t.props.open&&i()}),[t.props.open,i]),m.a.createElement(N.a,Object.assign({classes:{paper:"m-24"}},t.props,{onClose:g,fullWidth:!0,maxWidth:"xs"}),m.a.createElement(E.a,{position:"static",elevation:1},m.a.createElement(A.a,{className:"flex w-full"},m.a.createElement(y.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New Contact":"Edit Contact")),m.a.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},m.a.createElement(b.a,{className:"w-96 h-96",alt:"contact avatar",src:c.avatar}),"edit"===t.type&&m.a.createElement(y.a,{variant:"h6",color:"inherit",className:"pt-8"},c.name))),m.a.createElement("form",{noValidate:!0,onSubmit:x,className:"flex flex-col md:overflow-hidden"},m.a.createElement(v.a,{classes:{root:"p-24"}},m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"account_circle")),m.a.createElement(T.a,{className:"mb-24",label:"Name",autoFocus:!0,id:"name",name:"name",value:c.name,onChange:r,variant:"outlined",required:!0,fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"}),m.a.createElement(T.a,{className:"mb-24",label:"Last name",id:"lastName",name:"lastName",value:c.lastName,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"star")),m.a.createElement(T.a,{className:"mb-24",label:"Nickname",id:"nickname",name:"nickname",value:c.nickname,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"phone")),m.a.createElement(T.a,{className:"mb-24",label:"Phone",id:"phone",name:"phone",value:c.phone,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"email")),m.a.createElement(T.a,{className:"mb-24",label:"Email",id:"email",name:"email",value:c.email,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"domain")),m.a.createElement(T.a,{className:"mb-24",label:"Company",id:"company",name:"company",value:c.company,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"work")),m.a.createElement(T.a,{className:"mb-24",label:"Job title",id:"jobTitle",name:"jobTitle",value:c.jobTitle,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"cake")),m.a.createElement(T.a,{className:"mb-24",id:"birthday",label:"Birthday",type:"date",value:c.birthday,onChange:r,InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"home")),m.a.createElement(T.a,{className:"mb-24",label:"Address",id:"address",name:"address",value:c.address,onChange:r,variant:"outlined",fullWidth:!0})),m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"min-w-48 pt-20"},m.a.createElement(l.a,{color:"action"},"note")),m.a.createElement(T.a,{className:"mb-24",label:"Notes",id:"notes",name:"notes",value:c.notes,onChange:r,variant:"outlined",multiline:!0,rows:5,fullWidth:!0}))),"new"===t.type?m.a.createElement(h.a,{className:"justify-between p-8"},m.a.createElement("div",{className:"px-16"},m.a.createElement(C.a,{variant:"contained",color:"primary",onClick:x,type:"submit",disabled:!P()},"Add"))):m.a.createElement(h.a,{className:"justify-between p-8"},m.a.createElement("div",{className:"px-16"},m.a.createElement(C.a,{variant:"contained",color:"primary",type:"submit",onClick:x,disabled:!P()},"Save")),m.a.createElement(O.a,{onClick:function(){a(L(c.id)),g()}},m.a.createElement(l.a,null,"delete")))))},G=t(1388),R=t(476),H=t(209),B=t(1404);var U=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.contactsApp.contacts.searchText})),c=Object(u.c)((function(e){return e.fuse.settings.mainTheme}));return m.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},m.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},m.a.createElement(G.a,{lgUp:!0},m.a.createElement(O.a,{onClick:function(a){e.pageLayout.current.toggleLeftSidebar()},"aria-label":"open left sidebar"},m.a.createElement(l.a,null,"menu"))),m.a.createElement("div",{className:"flex items-center"},m.a.createElement(n.a,{animation:"transition.expandIn",delay:300},m.a.createElement(l.a,{className:"text-32"},"account_box")),m.a.createElement(n.a,{animation:"transition.slideLeftIn",delay:300},m.a.createElement(y.a,{variant:"h6",className:"mx-12 hidden sm:flex"},"Contacts")))),m.a.createElement("div",{className:"flex flex-1 items-center justify-center px-8 sm:px-12"},m.a.createElement(B.a,{theme:c},m.a.createElement(n.a,{animation:"transition.slideLeftIn",delay:300},m.a.createElement(H.a,{className:"flex p-4 items-center w-full max-w-512 h-48 px-8 py-4",elevation:1},m.a.createElement(l.a,{color:"action"},"search"),m.a.createElement(R.a,{placeholder:"Search for anything",className:"flex flex-1 px-16",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return a({type:w,searchText:e.target.value})}}))))))},F=t(23),M=t(26),_=t(1387),J=t(484),q=t(1405),z=t(1384),V=t(474),X=t(1378),Y=t(1337);var K=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.contactsApp.contacts.selectedContactIds})),n=Object(s.useState)(null),c=Object(F.a)(n,2),r=c[0],o=c[1];function i(){o(null)}return m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,{className:"p-0","aria-owns":r?"selectedContactsMenu":null,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},m.a.createElement(l.a,null,"more_horiz")),m.a.createElement(V.a,{id:"selectedContactsMenu",anchorEl:r,open:Boolean(r),onClose:i},m.a.createElement(Y.a,null,m.a.createElement(X.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/remove-contacts",{contactIds:e}).then((function(e){return Promise.all([a({type:"[CONTACTS APP] REMOVE CONTACTS"}),a({type:I})]).then((function(){return a(k(n))}))}))})),i()}},m.a.createElement(q.a,{className:"min-w-40"},m.a.createElement(l.a,null,"delete")),m.a.createElement(z.a,{primary:"Remove"})),m.a.createElement(X.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/set-contacts-starred",{contactIds:e}).then((function(e){return Promise.all([a({type:"[CONTACTS APP] SET CONTACTS STARRED "}),a({type:I}),a(x())]).then((function(){return a(k(n))}))}))})),i()}},m.a.createElement(q.a,{className:"min-w-40"},m.a.createElement(l.a,null,"star")),m.a.createElement(z.a,{primary:"Starred"})),m.a.createElement(X.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/set-contacts-unstarred",{contactIds:e}).then((function(e){return Promise.all([a({type:"[CONTACTS APP] SET CONTACTS STARRED "}),a({type:I}),a(x())]).then((function(){return a(k(n))}))}))})),i()}},m.a.createElement(q.a,{className:"min-w-40"},m.a.createElement(l.a,null,"star_border")),m.a.createElement(z.a,{primary:"Unstarred"})))))};var Q=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.contactsApp.contacts.entities})),c=Object(u.c)((function(e){return e.contactsApp.contacts.selectedContactIds})),r=Object(u.c)((function(e){return e.contactsApp.contacts.searchText})),o=Object(u.c)((function(e){return e.contactsApp.user})),i=Object(s.useState)(null),d=Object(F.a)(i,2),p=d[0],f=d[1];return Object(s.useEffect)((function(){t&&f(function(e,a){var t=Object.keys(e).map((function(a){return e[a]}));return 0===a.length?t:M.a.filterArrayByString(t,a)}(t,r))}),[t,r]),p?0===p.length?m.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},m.a.createElement(y.a,{color:"textSecondary",variant:"h5"},"There are no contacts!")):m.a.createElement(n.a,{animation:"transition.slideUpIn",delay:300},m.a.createElement(J.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,t,n){return{className:"cursor-pointer",onClick:function(e,n){t&&a({type:"[CONTACTS APP] OPEN EDIT CONTACT DIALOG",data:t.original})}}},data:p,columns:[{Header:function(){return m.a.createElement(_.a,{onClick:function(e){e.stopPropagation()},onChange:function(e){return e.target.checked?a({type:"[CONTACTS APP] SELECT ALL CONTACTS"}):a({type:I})},checked:c.length===Object.keys(t).length&&c.length>0,indeterminate:c.length!==Object.keys(t).length&&c.length>0})},accessor:"",Cell:function(e){return m.a.createElement(_.a,{onClick:function(e){e.stopPropagation()},checked:c.includes(e.value.id),onChange:function(){return a({type:"[CONTACTS APP] TOGGLE IN SELECTED CONTACTS",contactId:e.value.id})}})},className:"justify-center",sortable:!1,width:64},{Header:function(){return c.length>0&&m.a.createElement(K,null)},accessor:"avatar",Cell:function(e){return m.a.createElement(b.a,{className:"mx-8",alt:e.original.name,src:e.value})},className:"justify-center",width:64,sortable:!1},{Header:"First Name",accessor:"name",filterable:!0,className:"font-bold"},{Header:"Last Name",accessor:"lastName",filterable:!0,className:"font-bold"},{Header:"Company",accessor:"company",filterable:!0},{Header:"Job Title",accessor:"jobTitle",filterable:!0},{Header:"Email",accessor:"email",filterable:!0},{Header:"Phone",accessor:"phone",filterable:!0},{Header:"",width:128,Cell:function(e){return m.a.createElement("div",{className:"flex items-center"},m.a.createElement(O.a,{onClick:function(t){var n;t.stopPropagation(),a((n=e.original.id,function(e,a){var t=a().contactsApp.contacts.routeParams;return j.a.post("/api/contacts-app/toggle-starred-contact",{contactId:n}).then((function(a){return Promise.all([e({type:"[CONTACTS APP] TOGGLE STARRED CONTACT"}),e(x())]).then((function(){return e(k(t))}))}))}))}},o.starred&&o.starred.includes(e.original.id)?m.a.createElement(l.a,null,"star"):m.a.createElement(l.a,null,"star_border")),m.a.createElement(O.a,{onClick:function(t){t.stopPropagation(),a(L(e.original.id))}},m.a.createElement(l.a,null,"delete")))}}],defaultPageSize:10,noDataText:"No contacts found"})):null},Z=t(119),$=t(1402),ee=t(1338),ae=t(1339),te=Object(o.a)((function(e){return{listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:"".concat(e.palette.secondary.contrastText,"!important"),pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{marginRight:16}}}}));var ne=function(e){var a=Object(u.c)((function(e){return e.contactsApp.user})),t=te(e);return m.a.createElement("div",{className:"p-0 lg:p-24 lg:ltr:pr-4 lg:rtl:pl-4"},m.a.createElement(n.a,{animation:"transition.slideLeftIn",delay:200},m.a.createElement(H.a,{className:"rounded-0 shadow-none lg:rounded-8 lg:shadow-1"},m.a.createElement("div",{className:"p-24 flex items-center"},m.a.createElement(b.a,{alt:a.name,src:a.avatar}),m.a.createElement(y.a,{className:"mx-12"},a.name)),m.a.createElement($.a,null),m.a.createElement(ee.a,null,m.a.createElement(ae.a,{button:!0,component:Z.a,to:"/apps/contacts/all",activeClassName:"active",className:t.listItem},m.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"people"),m.a.createElement(z.a,{className:"truncate",primary:"All contacts",disableTypography:!0})),m.a.createElement(ae.a,{button:!0,component:Z.a,to:"/apps/contacts/frequent",activeClassName:"active",className:t.listItem},m.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"restore"),m.a.createElement(z.a,{className:"truncate",primary:"Frequently contacted",disableTypography:!0})),m.a.createElement(ae.a,{button:!0,component:Z.a,to:"/apps/contacts/starred",activeClassName:"active",className:t.listItem},m.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"star"),m.a.createElement(z.a,{className:"truncate",primary:"Starred contacts",disableTypography:!0}))))))},ce=t(74),re=t(13),le=t(10),oe={entities:null,searchText:"",selectedContactIds:[],routeParams:{},contactDialog:{type:"new",props:{open:!1},data:null}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case S:return Object(d.a)(Object(d.a)({},e),{},{entities:le.a.keyBy(a.payload,"id"),routeParams:a.routeParams});case w:return Object(d.a)(Object(d.a)({},e),{},{searchText:a.searchText});case"[CONTACTS APP] TOGGLE IN SELECTED CONTACTS":var t=a.contactId,n=Object(re.a)(e.selectedContactIds);return n=void 0!==n.find((function(e){return e===t}))?n.filter((function(e){return e!==t})):[].concat(Object(re.a)(n),[t]),Object(d.a)(Object(d.a)({},e),{},{selectedContactIds:n});case"[CONTACTS APP] SELECT ALL CONTACTS":var c=Object.keys(e.entities).map((function(a){return e.entities[a]})),r=c.map((function(e){return e.id}));return Object(d.a)(Object(d.a)({},e),{},{selectedContactIds:r});case I:return Object(d.a)(Object(d.a)({},e),{},{selectedContactIds:[]});case"[CONTACTS APP] OPEN NEW CONTACT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{contactDialog:{type:"new",props:{open:!0},data:null}});case"[CONTACTS APP] CLOSE NEW CONTACT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{contactDialog:{type:"new",props:{open:!1},data:null}});case"[CONTACTS APP] OPEN EDIT CONTACT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{contactDialog:{type:"edit",props:{open:!0},data:a.data}});case"[CONTACTS APP] CLOSE EDIT CONTACT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{contactDialog:{type:"edit",props:{open:!1},data:null}});default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return a.payload;default:return e}},me=Object(ce.d)({contacts:ie,user:se}),ue=Object(o.a)({addButton:{position:"absolute",right:12,bottom:12,zIndex:99}});a.default=Object(i.a)("contactsApp",me)((function(e){var a=Object(u.b)(),t=ue(e),o=Object(s.useRef)(null);return Object(s.useEffect)((function(){a(k(e.match.params)),a(x())}),[a,e.match.params]),Object(s.useEffect)((function(){a(k(e.match.params))}),[a,e.match.params]),m.a.createElement(m.a.Fragment,null,m.a.createElement(c.a,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:m.a.createElement(U,{pageLayout:o}),content:m.a.createElement(Q,null),leftSidebarContent:m.a.createElement(ne,null),sidebarInner:!0,ref:o,innerScroll:!0}),m.a.createElement(n.a,{animation:"transition.expandIn",delay:300},m.a.createElement(r.a,{color:"primary","aria-label":"add",className:t.addButton,onClick:function(e){return a({type:"[CONTACTS APP] OPEN NEW CONTACT DIALOG"})}},m.a.createElement(l.a,null,"person_add"))),m.a.createElement(W,null))}))}}]);